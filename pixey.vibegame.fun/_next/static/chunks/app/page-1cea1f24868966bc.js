(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7676:(e,t,a)=>{Promise.resolve().then(a.bind(a,12555))},12555:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>em});var s=a(95155),l=a(12115),r=a(11392),i=a(40840),n=a(59976),o=a(23599),c=a(74466),d=a(52596),u=a(39688);function x(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,u.QP)((0,d.$)(t))}let h=(0,c.F)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary",game:"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),m=l.forwardRef((e,t)=>{let{className:a,variant:l,size:r,...i}=e;return(0,s.jsx)("button",{className:x(h({variant:l,size:r,className:a})),ref:t,...i})});m.displayName="Button";var f=a(1700),p=a(54416);let g=f.bL;f.l9;let b=f.ZL;b.displayName=f.ZL.displayName;let w=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(f.hJ,{ref:t,className:x("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),style:{backgroundColor:"rgba(0, 0, 0, 0.8)"},...l})});w.displayName=f.hJ.displayName;let v=l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsxs)(b,{children:[(0,s.jsx)(w,{}),(0,s.jsxs)(f.UC,{ref:t,className:x("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",a),...r,children:[l,(0,s.jsxs)(f.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});v.displayName=f.UC.displayName;let y=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:x("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};y.displayName="DialogHeader";let j=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(f.hE,{ref:t,className:x("text-lg font-semibold leading-none tracking-tight",a),...l})});j.displayName=f.hE.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(f.VY,{ref:t,className:x("text-sm text-muted-foreground",a),...l})}).displayName=f.VY.displayName;let N=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:x("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});N.displayName="Card",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:x("flex flex-col space-y-1.5 p-6",a),...l})}).displayName="CardHeader",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("h3",{ref:t,className:x("text-2xl font-semibold leading-none tracking-tight",a),...l})}).displayName="CardTitle",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("p",{ref:t,className:x("text-sm text-muted-foreground",a),...l})}).displayName="CardDescription";let E=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:x("p-6 pt-0",a),...l})});E.displayName="CardContent",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:x("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter";var k=a(12108),S=a(18175);function C(e){var t;let{className:a,variant:i="default",size:n="default"}=e,{data:o,status:c}=(0,k.useSession)(),{publicKey:d}=(0,r.v)(),[u,x]=(0,l.useState)(!1),h=async()=>{if(!d)return void alert("Please connect your wallet first");x(!0);try{await (0,k.signIn)("twitter",{callbackUrl:"".concat(window.location.origin,"?wallet=").concat(d.toString())})}catch(e){console.error("Error signing in with Twitter:",e)}finally{x(!1)}};return"loading"===c?(0,s.jsxs)(m,{disabled:!0,variant:i,size:n,className:"bg-gray-500 text-white ".concat(a),children:[(0,s.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Loading..."]}):(null==o||null==(t=o.user)?void 0:t.username)?(0,s.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,s.jsx)(S.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"X Connected"})]}):(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)(m,{onClick:h,disabled:u||!d,variant:"ghost",size:"sm",className:"w-full justify-center text-sm px-2 py-1.5 h-8 rounded-full mx-2 mb-2",style:{background:"linear-gradient(to right, #EE2B7E, #EE5705)",color:"white"},children:[u?"Connecting...":"Connect",(0,s.jsx)("svg",{className:"h-4 w-4 ml-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})]}),(0,s.jsx)("div",{className:"text-xs text-gray-400 px-2",children:"Connect X and get 25 pixels free"})]})}var F=a(57141);let _=l.forwardRef((e,t)=>{let{className:a,type:l,...r}=e;return(0,s.jsx)("input",{type:l,className:x("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});_.displayName="Input";let A=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("label",{ref:t,className:x("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...l})});A.displayName="Label";var T=a(71539),B=a(65453),P=a(46786);let z=(0,B.v)()((0,P.eh)((e,t)=>({user:null,pixelBoard:{pixels:{},totalBurned:0,currentStage:1,boardSize:F.w8.STAGE_1.size},selectedPixel:null,selectedColor:F.cF[0],toasts:[],chatMessages:[],leaderboard:[],setUser:t=>{e({user:t}),t&&void 0===t.free_pixels&&e({user:{...t,free_pixels:F.P$}})},updatePixelBoard:a=>{let s={};a.forEach(e=>{s["".concat(e.x,",").concat(e.y)]=e});let l={...t().pixelBoard,pixels:s};l.totalBurned>=F.w8.STAGE_3.required_burns?(l.currentStage=3,l.boardSize=F.w8.STAGE_3.size):l.totalBurned>=F.w8.STAGE_2.required_burns&&(l.currentStage=2,l.boardSize=F.w8.STAGE_2.size),e({pixelBoard:l})},updateGameSettings:(t,a,s)=>{e(e=>({pixelBoard:{...e.pixelBoard,currentStage:t,totalBurned:a,boardSize:s}}))},setSelectedPixel:t=>{e({selectedPixel:t})},setSelectedColor:t=>{e({selectedColor:t})},addToast:a=>{let s=Date.now().toString(),l={...a,id:s,createdAt:new Date};e(e=>({toasts:[l,...e.toasts].slice(0,2)})),setTimeout(()=>{t().removeToast(s)},a.duration||5e3)},removeToast:t=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==t)}))},addChatMessage:t=>{e(e=>({chatMessages:[t,...e.chatMessages].slice(0,100)}))},updateLeaderboard:t=>{e({leaderboard:t})},refreshUserData:async t=>{try{let a=await fetch("/api/users?wallet_address=".concat(t));if(a.ok){let t=await a.json();if(t.success&&t.data&&t.data.user){let a=t.data.user;e({user:a})}}}catch(e){console.error("Error refreshing user data:",e)}},placePixel:async(e,a,s)=>{let l=t();l.user,l.addToast({message:"The board is frozen. Pixel placement is currently disabled.",type:"warning"})}})));var I=a(23570),L=a(62356),M=a(74966),R=a(54568);async function Y(e){try{let{walletSignTransaction:t,ownerPubkey:a,amount:s}=e;if(!t)throw Error("No wallet connected");let l=new I.Connection(F.RZ),r=new I.PublicKey(a),i=new I.PublicKey(F.qe),n=await (0,L.Ob)(i,r),o=await l.getAccountInfo(n),c=new I.Transaction;o||c.add((0,M.JA)(r,n,r,i));let d=await (0,L.b6)(l,i),u=Math.floor(s*Math.pow(10,d.decimals));u>0&&c.add((0,R.CE)(n,i,r,u));let{blockhash:x}=await l.getLatestBlockhash();c.recentBlockhash=x,c.feePayer=r;let h=await t(c),m=await l.sendRawTransaction(h.serialize(),{preflightCommitment:"processed"}),f=await l.getLatestBlockhash();if((await l.confirmTransaction({signature:m,blockhash:f.blockhash,lastValidBlockHeight:f.lastValidBlockHeight},"confirmed")).value.err)throw Error("Transaction failed on Solana");return{signature:m}}catch(e){throw e}}var O=a(44134).Buffer;function V(e){let{isOpen:t,onClose:a}=e,{publicKey:n,signTransaction:o}=(0,r.v)(),{setVisible:c}=(0,i.o)(),{addToast:d,refreshUserData:u}=z(),[x,h]=(0,l.useState)(""),[f,p]=(0,l.useState)(""),[b,w]=(0,l.useState)(!1),[N,E]=(0,l.useState)("pixels"),[k,S]=(0,l.useState)(""),[C,B]=(0,l.useState)(!1),[P,L]=(0,l.useState)(!1),[M,R]=(0,l.useState)(0),[V,X]=(0,l.useState)(1),[D,W]=(0,l.useState)(!1),[q,U]=(0,l.useState)(0),H=e=>{h(e),e&&!isNaN(Number(e))?p((10*Number(e)).toString()):p("")},G=async()=>{if(!n||!o)return void d({message:"Please connect your wallet first",type:"error"});if(!f||!x)return void d({message:"Please enter both VIBEY amount and pixels",type:"error"});let e=Number(f),t=Number(x);if(isNaN(e)||e<=0)return void d({message:"Please enter a valid VIBEY amount",type:"error"});if(isNaN(t)||t<=0)return void d({message:"Please enter a valid pixel amount",type:"error"});w(!0);try{let s=await Y({walletSignTransaction:o,ownerPubkey:n.toString(),amount:e}),l=await fetch("/api/burn-tokens",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet_address:n.toString(),token_amount:e,transaction_signature:s.signature})}),r=await l.json();r.success?(d({message:"Successfully burned ".concat(e," $VIBEY for ").concat(t," pixels!"),type:"success"}),n&&await u(n.toString()),a(),h(""),p("")):d({message:r.error||"Failed to update database",type:"error"})}catch(e){console.error("Error burning tokens:",e),d({message:e instanceof Error?e.message:"Failed to burn tokens. Please try again.",type:"error"})}finally{w(!1)}},$=e=>{S(e);let t=Number(e);t>0?Z(t):R(0)};(0,l.useEffect)(()=>{"vibey"===N?(S("0.01"),ea(),Z(.01)):"pixels"===N&&H("10")},[N]);let J=async()=>{let e=Number(k);if(!k||isNaN(e)||e<=0)return void d({message:"Please enter a valid amount to buy",type:"error"});if(e<.001)return void d({message:"Minimum buy amount is 0.001 SOL",type:"error"});if(!n)return void c(!0);if(!o)return void d({message:"Your wallet doesn't support signing transactions",type:"error"});L(!0);try{let t=await fetch("/api/jupiter/buy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e,outputMint:F.qe,wallet:n.toString(),slippage:1})}),a=await t.json();if(!t.ok)throw Error(a.error||"HTTP error! status: ".concat(t.status));let s=Uint8Array.from(O.from(a.transactionHex,"hex")),l=I.VersionedTransaction.deserialize(s),r=await o(l),i=await fetch("".concat(F.AU,"/execute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({signedTransaction:O.from(r.serialize()).toString("base64"),requestId:a.requestId})}),c=await i.json();if(!i.ok)throw Error(c.error||"Failed to execute transaction");d({message:"Successfully bought VIBEY tokens worth ".concat(k," SOL!"),type:"success"}),S("0.01"),R(0)}catch(e){console.error("Buy error:",e),d({message:e instanceof Error?e.message:"Failed to process transaction",type:"error"})}finally{L(!1)}},Z=async e=>{try{ee>0&&R(e/ee)}catch(e){console.error("Failed to calculate estimated tokens:",e)}},[K,Q]=(0,l.useState)(0),[ee,et]=(0,l.useState)(0),ea=async()=>{try{let e=await fetch("/api/jupiter/price?tokenId=".concat(F.qe));if(e.ok){let t=await e.json(),a=parseFloat(t.price);Q(a);let s=await fetch("/api/jupiter/price?tokenId=".concat(F.xZ.SOL));if(s.ok){let e=await s.json(),t=parseFloat(e.price);t>0&&et(a/t)}}}catch(e){console.error("Failed to fetch VIBEY price data:",e)}};return(0,s.jsx)(g,{open:t,onOpenChange:a,children:(0,s.jsxs)(v,{className:" bg-[#1A1A1A]/95 border border-white/40 sm:max-w-md w-[calc(100vw-24px)] md:w-full",children:[(0,s.jsx)(y,{children:(0,s.jsx)(j,{className:"text-white"})}),(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsxs)("h3",{className:"text-white text-lg font-semibold",children:[(0,s.jsx)("span",{style:{background:"linear-gradient(to right, #EE05E7, #EE5705)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"$VIBEY"})," helps you get Pixels"]})}),(0,s.jsxs)("div",{className:"flex mb-4",children:[(0,s.jsx)("button",{onClick:()=>E("vibey"),className:"flex-1 py-3 px-4 rounded-l-md text-sm font-medium transition-all ".concat("vibey"===N?"bg-black text-transparent bg-clip-text":"bg-black text-gray-300 hover:text-white"),style:"vibey"===N?{background:"linear-gradient(to right, #EE05E7, #EE5705)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",border:"2px solid",borderImage:"linear-gradient(to right, #EE05E7, #EE5705) 1"}:{},children:"Buy $VIBEY"}),(0,s.jsx)("button",{onClick:()=>E("pixels"),className:"flex-1 py-3 px-4 rounded-r-md text-sm font-medium transition-all ".concat("pixels"===N?"bg-black text-transparent bg-clip-text":"bg-black text-gray-300 hover:text-white"),style:"pixels"===N?{background:"linear-gradient(to right, #EE05E7, #EE5705)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",border:"2px solid",borderImage:"linear-gradient(to right, #EE05E7, #EE5705) 1"}:{},children:"Buy Pixels"})]}),"vibey"===N&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"bg-black rounded-lg p-4 text-center",children:(0,s.jsxs)("div",{className:"text-sm text-white font-medium",children:["1 VIBEY = $",K>0?K.toFixed(6):"0.000000"]})}),(0,s.jsx)("div",{className:"w-full bg-[#1A1A1A]/95 backdrop-blur-sm border border-white/20 rounded-lg p-4 shadow-lg",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(A,{className:"text-sm font-medium text-gray-300",children:"Amount in SOL"}),(0,s.jsx)(_,{type:"number",placeholder:"0.0",value:k,onChange:e=>$(e.target.value),className:"w-full focus:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 bg-white/10 border-white/20 text-white",min:"0.001",step:"0.001"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(m,{variant:"outline",size:"sm",onClick:()=>$("0.1"),className:"flex-1 text-xs h-8 bg-white/10 border-white/20 text-white hover:bg-white/20",children:"0.1 SOL"}),(0,s.jsx)(m,{variant:"outline",size:"sm",onClick:()=>$("0.5"),className:"flex-1 text-xs h-8 bg-white/10 border-white/20 text-white hover:bg-white/20",children:"0.5 SOL"}),(0,s.jsx)(m,{variant:"outline",size:"sm",onClick:()=>$("1"),className:"flex-1 text-xs h-8 bg-white/10 border-white/20 text-white hover:bg-white/20",children:"1 SOL"})]}),k&&Number(k)>0&&(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:["You'll receive approximately:"," ",(0,s.jsxs)("span",{className:"font-semibold text-white",children:[ee>0?(Number(k)*(1/ee)).toFixed(6):"..."," ","VIBEY"]})]})]})}),(0,s.jsx)(m,{onClick:J,disabled:P||!k||.001>Number(k),className:"w-full h-12 text-lg font-medium text-white",style:{background:"linear-gradient(to right, #EE05E7, #EE5705)",border:"none"},children:P?"Processing...":"Buy VIBEY"})]}),"pixels"===N&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"bg-black rounded-lg p-4 text-center",children:(0,s.jsx)("div",{className:"text-sm text-white font-medium",children:"1 Pixel = 10 $VIBEY"})}),(0,s.jsx)("div",{className:"w-full bg-[#1A1A1A]/95 backdrop-blur-sm border border-white/20 rounded-lg p-4 shadow-lg",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(A,{htmlFor:"pixels",className:"text-white",children:"Pixels Wanted"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(_,{id:"pixels",type:"number",placeholder:"Enter pixels you want",value:x,onChange:e=>H(e.target.value),className:"pr-12 bg-white/10 border-white/20 text-white",min:"1"}),(0,s.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm",children:"PX"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(m,{variant:"outline",size:"sm",onClick:()=>H("25"),className:"flex-1 text-xs h-8 bg-white/10 border-white/20 text-white hover:bg-white/20",children:"25 PX"}),(0,s.jsx)(m,{variant:"outline",size:"sm",onClick:()=>H("50"),className:"flex-1 text-xs h-8 bg-white/10 border-white/20 text-white hover:bg-white/20",children:"50 PX"}),(0,s.jsx)(m,{variant:"outline",size:"sm",onClick:()=>H("100"),className:"flex-1 text-xs h-8 bg-white/10 border-white/20 text-white hover:bg-white/20",children:"100 PX"})]}),x&&Number(x)>0&&(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:["You will burn"," ",(0,s.jsxs)("span",{className:"font-semibold text-white",children:[f," $VIBEY"]})," ","to get these pixels"]})]})}),(0,s.jsx)(m,{onClick:G,disabled:b||!x||!f,className:"w-full h-12 text-lg font-medium text-white",style:{background:"linear-gradient(to right, #EE05E7, #EE5705)",border:"none"},children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Burning..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"Burn & Get Pixels"]})})]})]})})}var X=a(74783),D=a(93550),W=a(66474),q=a(34835),U=a(18186);function H(e){let{className:t,isAuthenticated:a,onMobileMenuChange:i}=e,{publicKey:n,disconnect:c}=(0,r.v)(),{user:d,pixelBoard:u,addToast:h}=z(),{data:f}=(0,k.useSession)(),[b,w]=(0,l.useState)(!1),[S,_]=(0,l.useState)([]),[A,T]=(0,l.useState)(0),[B,P]=(0,l.useState)(null),[I,L]=(0,l.useState)("pixel_placed"),[M,R]=(0,l.useState)("green"),[Y,O]=(0,l.useState)(!1),[H,G]=(0,l.useState)(!1),[$,J]=(0,l.useState)(!1),[Z,K]=(0,l.useState)(!1);(0,l.useEffect)(()=>{null==i||i(Z)},[Z,i]),(0,l.useEffect)(()=>{let e=async()=>{try{let e=await (0,F.ft)();T(e)}catch(e){console.error("Error fetching burned tokens:",e)}};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[]),(0,l.useEffect)(()=>{},[d]),(0,l.useEffect)(()=>{n&&!d&&(async()=>{try{let e=await fetch("/api/users?wallet=".concat(n.toString()));if(e.ok){let t=await e.json();if(t.success&&t.data.length>0){let e=t.data[0];z.getState().setUser(e)}}}catch(e){console.error("Error fetching user data:",e)}})()},[n,d]),(0,l.useEffect)(()=>{var e;(null==f||null==(e=f.user)?void 0:e.username)&&d&&(!d.username||d.username===d.wallet_address)&&(0,k.signOut)({callbackUrl:window.location.origin})},[f,d,k.signOut]),(0,l.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/notifications?type=pixel_placed&limit=1");if(e.ok){let t=await e.json();if(t.success&&t.data.length>0){let e=t.data[0],a="".concat(e.data.placed_by.slice(0,4),"...").concat(e.data.placed_by.slice(-4)," placed pixel at (").concat(e.data.x,", ").concat(e.data.y,")");B!==a&&(P(a),L("pixel_placed"),R(et()),O(!0),setTimeout(()=>O(!1),800))}}}catch(e){console.error("Error fetching notification:",e)}};e();let t=setInterval(e,5e3);return()=>clearInterval(t)},[B]),(0,l.useEffect)(()=>{let e=e=>{if($){let t=e.target,a=document.querySelector("[data-account-dropdown]"),s=document.querySelector("[data-account-button]");s&&s.contains(t)||a&&!a.contains(t)&&J(!1)}};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[$]);let Q=async()=>{await c()},ee=()=>n?(null==d?void 0:d.profile_picture)?d.profile_picture:"https://api.dicebear.com/9.x/pixel-art/svg?seed=".concat(n.toString()):"",et=()=>{let e=["green","yellow","red","blue","purple","pink","orange","cyan"];return e[Math.floor(Math.random()*e.length)]},ea=async()=>{if(n)try{let e=document.createElement("canvas"),t=e.getContext("2d");if(!t)return;e.width=800,e.height=800;let a=new Image;a.crossOrigin="anonymous",a.onload=async()=>{t.imageSmoothingEnabled=!0,t.imageSmoothingQuality="high";try{let e=new FontFace("MatrixSansVideo","url(/fonts/MatrixSansVideo-Regular.ttf)");await e.load(),document.fonts.add(e)}catch(e){console.log("MatrixSansVideo font not loaded, using fallback")}t.drawImage(a,0,0,800,800);let s=new Image;s.crossOrigin="anonymous",s.onload=()=>{t.save();let a=200,l=(800-a)/2,r=100,i=24;t.beginPath(),t.moveTo(l+i,r),t.lineTo(l+a-i,r),t.quadraticCurveTo(l+a,r,l+a,r+i),t.lineTo(l+a,r+a-i),t.quadraticCurveTo(l+a,r+a,l+a-i,r+a),t.lineTo(l+i,r+a),t.quadraticCurveTo(l,r+a,l,r+a-i),t.lineTo(l,r+i),t.quadraticCurveTo(l,r,l+i,r),t.closePath(),t.clip(),t.drawImage(s,l,r,a,a),t.restore(),t.strokeStyle="rgba(255, 255, 255, 0.3)",t.lineWidth=6,t.beginPath(),t.moveTo(l+i,r),t.lineTo(l+a-i,r),t.quadraticCurveTo(l+a,r,l+a,r+i),t.lineTo(l+a,r+a-i),t.quadraticCurveTo(l+a,r+a,l+a-i,r+a),t.lineTo(l+i,r+a),t.quadraticCurveTo(l,r+a,l,r+a-i),t.lineTo(l,r+i),t.quadraticCurveTo(l,r,l+i,r),t.closePath(),t.stroke(),t.fillStyle="white",t.font="bold ".concat(28,"px MatrixSansVideo, sans-serif"),t.textAlign="center";let o=(null==d?void 0:d.username)&&d.username!==(null==d?void 0:d.wallet_address)?"@".concat(d.username):n.toString().slice(0,4)+"..."+n.toString().slice(-4);t.fillText(o,400,r+a+50);let c=r+a+220,u=c+40,x=0,h=720,m=(800-h)/2,f=m+x,p=m+h-x;t.font="bold ".concat(120,"px MatrixSansVideo, sans-serif"),t.textAlign="left";let g=t.createLinearGradient(f,c-60,f+240,c-60);g.addColorStop(0,"#EE00FF"),g.addColorStop(1,"#EE5705"),t.fillStyle=g,t.fillText(((null==d?void 0:d.total_pixels_placed)||0).toString(),f,c),t.font="".concat(28,"px MatrixSansVideo, sans-serif"),t.fillStyle="#E5E7EB",t.fillText("Pixels Placed",f,u),t.font="bold ".concat(120,"px MatrixSansVideo, sans-serif"),t.textAlign="right";let b=t.createLinearGradient(p-240,c-60,p,c-60);b.addColorStop(0,"#FFA371"),b.addColorStop(1,"#EE5705"),t.fillStyle=b,t.fillText(Math.floor(Number(null==d?void 0:d.total_tokens_burned)||0).toString(),p,c),t.font="".concat(28,"px MatrixSansVideo, sans-serif"),t.fillStyle="#E5E7EB",t.fillText("$VIBEY Burned",p,u),e.toBlob(e=>{e&&es(e)},"image/png",.95)},s.src=ee()},a.src="/card.svg"}catch(e){console.error("Error sharing profile card:",e)}},es=async e=>{try{await el(e),h({message:"Image copied to clipboard! Opening X...",type:"success",duration:3e3}),setTimeout(()=>{let e=encodeURIComponent("Remember r/place?\n\nIt's on @solana by @vibegamefun now\n\nI'm drawing at: pixey.vibegame.fun");window.open("https://twitter.com/intent/tweet?text=".concat(e),"_blank","width=600,height=400")},1500)}catch(t){console.error("Error copying image to clipboard:",t),h({message:"Failed to copy image. Opening X anyway...",type:"error",duration:3e3});let e=encodeURIComponent("Remember r/place?\n\nIt's on @solana by @vibegamefun now\n\nI'm drawing at: pixey.vibegame.fun");window.open("https://twitter.com/intent/tweet?text=".concat(e),"_blank","width=600,height=400")}},el=async e=>{try{let t=new ClipboardItem({"image/png":e});await navigator.clipboard.write([t])}catch(l){console.error("Clipboard API failed, trying fallback method:",l);let t=document.createElement("canvas"),a=t.getContext("2d");if(!a)throw Error("Could not get canvas context");let s=new Image;s.onload=()=>{t.width=s.width,t.height=s.height,a.drawImage(s,0,0),t.toBlob(async e=>{if(e)try{let t=new ClipboardItem({"image/png":e});await navigator.clipboard.write([t])}catch(e){throw Error("All clipboard methods failed")}},"image/png")},s.src=URL.createObjectURL(e)}},er=e=>e>=1e6?(e/1e6).toFixed(2)+" million":e>=1e3?(e/1e3).toFixed(2)+"k":e.toFixed(2);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("nav",{className:x("flex flex-col pt-4 px-4",t),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("img",{src:"/logo.svg",alt:"Pixey Logo",className:"h-8 sm:h-12 w-auto md:hidden"})}),(0,s.jsx)("button",{onClick:()=>K(!0),className:"md:hidden text-white p-2",children:(0,s.jsx)(X.A,{className:"h-6 w-6"})})]}),(0,s.jsxs)("div",{className:"hidden md:flex items-center justify-between w-full",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsx)("div",{className:"flex flex-col space-y-2",children:(0,s.jsx)("img",{src:"/logo.svg",alt:"Pixey Logo",className:"h-8 sm:h-12 w-auto"})})}),(0,s.jsxs)("div",{className:"hidden md:flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"flex items-center space-x-2 bg-white/10 rounded-lg px-3 py-3 border border-white/20",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("div",{className:"text-sm text-white",children:["\uD83D\uDD25"," ",(0,s.jsx)("span",{className:"bg-gradient-to-r from-[#FFA371] to-[#EE5705] bg-clip-text text-transparent font-bold",children:er(A)})," ","$VIBEY Burned"]})})}),(0,s.jsx)("div",{className:"flex items-center space-x-2 bg-white/10 rounded-lg px-3 py-3 border border-white/20",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("div",{className:"text-sm text-white",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Pixels Placed: "}),(0,s.jsx)("span",{className:"font-bold",children:u.pixels?Object.keys(u.pixels).length:0})]})})})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)("div",{className:"hidden md:flex items-center space-x-1",children:n&&a?(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[n&&a&&(0,s.jsxs)(m,{onClick:()=>G(!0),variant:"outline",size:"sm",className:"border-yellow-500/30 text-white hover:bg-yellow-500/30 text-sm px-2 py-2 h-12 flex items-center",style:{backgroundColor:"#FFAE0033"},children:[(0,s.jsx)(D.A,{className:"h-4 w-4 mr-2 text-white"}),"Buy Pixels"]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)(m,{"data-account-button":!0,onClick:()=>{console.log("Account button clicked, current state:",$),J(e=>{let t=!e;return console.log("Setting isAccountOpen to:",t),t})},variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/20 text-sm px-2 py-2 h-12 flex items-center gap-2",style:{backgroundColor:"#3405EE66"},children:[(0,s.jsx)("img",{src:ee(),alt:"Avatar",className:"h-7 w-7 rounded-full"}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"text-base font-medium text-white",children:(null==d?void 0:d.username)&&d.username!==(null==d?void 0:d.wallet_address)?d.username:n.toString().slice(0,4)+"..."+n.toString().slice(-4)}),(0,s.jsxs)("div",{className:"text-base text-gray-300",children:[(null==d?void 0:d.total_pixels_placed)||0," placed •"," ",(null==d?void 0:d.free_pixels)||0," left"]})]}),(0,s.jsx)(W.A,{className:"h-3 w-3"})]}),$&&(0,s.jsx)("div",{"data-account-dropdown":!0,className:"absolute right-0 top-full mt-2 w-72 rounded-md shadow-lg border border-gray-700 z-[999999]",style:{backgroundColor:"#1F1F1F"},children:(0,s.jsxs)("div",{className:"py-3",children:[(!(null==d?void 0:d.username)||(null==d?void 0:d.username)===(null==d?void 0:d.wallet_address))&&(0,s.jsx)("div",{className:"py-1.5 mb-3 flex justify-center",children:(0,s.jsx)(C,{})}),a&&(0,s.jsx)("div",{className:"px-3 mb-3",children:(0,s.jsxs)("div",{className:"relative w-full h-64 rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat rounded-lg",style:{backgroundImage:"url(/card.svg)",backgroundSize:"100% 100%",width:"100%",height:"100%"}}),(0,s.jsxs)("div",{className:"absolute top-0 left-0 right-0 h-48 flex flex-col items-center text-white p-4 pt-3",children:[(0,s.jsx)("img",{src:ee(),alt:"Profile",className:"h-16 w-16 rounded-lg border-2 border-white/30 mb-3"}),(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsx)("div",{className:"text-xl mb-1",children:(null==d?void 0:d.username)&&d.username!==(null==d?void 0:d.wallet_address)?"@".concat(d.username):n.toString().slice(0,4)+"..."+n.toString().slice(-4)})}),(0,s.jsxs)("div",{className:"flex justify-between w-full max-w-56",children:[(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"text-3xl font-bold bg-gradient-to-r from-[#EE00FF] to-[#EE5705] bg-clip-text text-transparent",children:(null==d?void 0:d.total_pixels_placed)||0}),(0,s.jsx)("div",{className:"text-sm text-gray-200",children:"Pixels Placed"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-3xl font-bold bg-gradient-to-r from-[#FFA371] to-[#EE5705] bg-clip-text text-transparent",children:Math.floor(Number(null==d?void 0:d.total_tokens_burned)||0)}),(0,s.jsx)("div",{className:"text-sm text-gray-200",children:"$VIBEY Burned"})]})]})]})]})}),(0,s.jsx)("div",{className:"px-3",children:(0,s.jsxs)(m,{onClick:()=>ea(),variant:"ghost",size:"sm",className:"w-full justify-center text-sm px-2 py-1.5 h-8 rounded-full",style:{background:"linear-gradient(to right, #EE2B7E, #EE5705)",color:"white"},children:["Share on",(0,s.jsx)("svg",{className:"h-4 w-4 ml-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})]})})]})})]}),(0,s.jsx)(m,{onClick:Q,variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-600/20 p-2 h-12 w-12",title:"Disconnect Wallet",children:(0,s.jsx)(q.A,{className:"h-5 w-5"})})]}):(0,s.jsx)(o.x,{className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 h-10 !h-10 [&_button]:!py-1 [&_button]:!h-10 [&_button]:!min-h-[40px] [&_button]:!max-h-[40px] [&_button]:!leading-[40px]"})})})]})]}),Z&&(0,s.jsx)("div",{className:"md:hidden fixed inset-0 z-50 bg-black/40",children:(0,s.jsxs)("div",{className:"absolute top-0 right-0 w-80 h-full bg-black/20 backdrop-blur-xl border-l border-white/20 p-6 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white",children:"Menu"}),(0,s.jsx)(m,{onClick:()=>K(!1),variant:"ghost",size:"sm",className:"text-white p-2",children:(0,s.jsx)(p.A,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,s.jsx)("div",{className:"bg-white/10 rounded-lg px-4 py-3 border border-white/20",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("div",{className:"text-sm text-white",children:["\uD83D\uDD25"," ",(0,s.jsx)("span",{className:"bg-gradient-to-r from-[#FFA371] to-[#EE5705] bg-clip-text text-transparent font-bold",children:er(A)})," ","$VIBEY Burned"]})})}),(0,s.jsx)("div",{className:"bg-white/10 rounded-lg px-4 py-3 border border-white/20",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("div",{className:"text-sm text-white",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Pixels Placed: "}),(0,s.jsx)("span",{className:"font-bold",children:u.pixels?Object.keys(u.pixels).length:0})]})})})]}),(0,s.jsx)("div",{className:"space-y-4",children:n?(0,s.jsx)("div",{className:"space-y-4 pt-4",children:a&&(0,s.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,s.jsx)("img",{src:ee(),alt:"Avatar",className:"h-12 w-12 rounded-full"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-base font-medium text-white",children:(null==d?void 0:d.username)&&d.username!==(null==d?void 0:d.wallet_address)?d.username:n.toString().slice(0,4)+"..."+n.toString().slice(-4)}),(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:[(null==d?void 0:d.total_pixels_placed)||0," placed •"," ",(null==d?void 0:d.free_pixels)||0," left"]})]})]}),(!(null==d?void 0:d.username)||(null==d?void 0:d.username)===(null==d?void 0:d.wallet_address))&&(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)(C,{})}),a&&(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsxs)("div",{className:"relative w-full h-64 rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat rounded-lg",style:{backgroundImage:"url(/card.svg)",backgroundSize:"100% 100%",width:"100%",height:"100%"}}),(0,s.jsxs)("div",{className:"absolute top-0 left-0 right-0 h-48 flex flex-col items-center text-white p-4 pt-3",children:[(0,s.jsx)("img",{src:ee(),alt:"Profile",className:"h-16 w-16 rounded-lg border-2 border-white/30 mb-3"}),(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsx)("div",{className:"text-xl mb-1",children:(null==d?void 0:d.username)&&d.username!==(null==d?void 0:d.wallet_address)?"@".concat(d.username):n.toString().slice(0,4)+"..."+n.toString().slice(-4)})}),(0,s.jsxs)("div",{className:"flex justify-between w-full max-w-56",children:[(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"text-3xl font-bold bg-gradient-to-r from-[#EE00FF] to-[#EE5705] bg-clip-text text-transparent",children:(null==d?void 0:d.total_pixels_placed)||0}),(0,s.jsx)("div",{className:"text-xs text-gray-200",children:"Pixels Placed"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-3xl font-bold bg-gradient-to-r from-[#FFA371] to-[#EE5705] bg-clip-text text-transparent",children:Math.floor(Number(null==d?void 0:d.total_tokens_burned)||0)}),(0,s.jsx)("div",{className:"text-xs text-gray-200",children:"$VIBEY Burned"})]})]})]})]})}),(0,s.jsxs)(m,{onClick:()=>{ea(),K(!1)},variant:"ghost",size:"sm",className:"w-full justify-center text-sm py-2 h-10 rounded-full mb-3",style:{background:"linear-gradient(to right, #EE2B7E, #EE5705)",color:"white"},children:["Share Profile on",(0,s.jsx)("svg",{className:"h-4 w-4 ml-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})]}),(0,s.jsxs)(m,{onClick:()=>{Q(),K(!1)},variant:"ghost",size:"sm",className:"w-full text-red-600 hover:bg-red-600/20 py-2 h-10",children:[(0,s.jsx)(q.A,{className:"h-4 w-4 mr-2"}),"Disconnect Wallet"]})]})}):(0,s.jsx)("div",{className:"pt-4",children:(0,s.jsx)(o.x,{className:"w-full bg-purple-600 hover:bg-purple-700 text-white px-3 py-3 h-12 !h-12 [&_button]:!py-3 [&_button]:!h-12 [&_button]:!min-h-[48px] [&_button]:!max-h-[48px] [&_button]:!leading-[48px]"})})})]})}),(0,s.jsx)(g,{open:b,onOpenChange:w,children:(0,s.jsxs)(v,{className:"max-w-2xl max-h-[80vh] overflow-y-auto bg-[#1A1A1A]/95",children:[(0,s.jsx)(y,{children:(0,s.jsxs)(j,{className:"flex items-center gap-2",children:[(0,s.jsx)(U.A,{className:"h-6 w-6 text-yellow-500"}),"Leaderboard"]})}),(0,s.jsx)("div",{className:"space-y-4",children:S.length>0?S.map((e,t)=>(0,s.jsx)(N,{className:"bg-white/5 border-white/10",children:(0,s.jsx)(E,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full text-black font-bold text-sm",children:t+1}),(0,s.jsx)("img",{src:e.profile_picture||"https://api.dicebear.com/9.x/pixel-art/svg?seed=".concat(e.wallet_address),alt:"Avatar",className:"h-8 w-8 rounded-full"}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"font-medium text-white",children:e.username&&e.username!==e.wallet_address?e.username:e.wallet_address.slice(0,4)+"..."+e.wallet_address.slice(-4)})})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Placed pixels"}),(0,s.jsx)("div",{className:"font-medium text-white",children:e.total_pixels_placed})]})]})})},e.wallet_address)):(0,s.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No players found"})})]})}),(0,s.jsx)(V,{isOpen:H,onClose:()=>G(!1)})]})}function G(e){let{className:t,selectedPixel:a,onPixelSelect:r}=e,i=(0,l.useRef)(null),n=(0,l.useRef)(null),[o,c]=(0,l.useState)({scale:1,offsetX:0,offsetY:0}),[d,u]=(0,l.useState)(!1),[h,m]=(0,l.useState)({x:0,y:0}),[f,p]=(0,l.useState)(null),[g,b]=(0,l.useState)(null),{pixelBoard:w,updatePixelBoard:v,updateGameSettings:y}=z(),j=(0,l.useCallback)(async()=>{try{let e=await fetch("/api/pixels"),t=await e.json();t.success&&v(t.data.pixels)}catch(e){console.error("Error fetching pixels:",e)}},[v]),N=(0,l.useCallback)(async()=>{try{let e=await fetch("/api/game-settings"),t=await e.json();if(t.success){let{currentStage:e,totalBurned:a,boardSize:s}=t.data;y(e,a,s)}}catch(e){console.error("Error fetching game settings:",e)}},[y]);(0,l.useEffect)(()=>{j(),N();let e=setInterval(j,2e3),t=setInterval(N,5e3);return()=>{clearInterval(e),clearInterval(t)}},[j,N]);let E=(0,l.useCallback)((e,t)=>{let a=i.current;if(!a)return null;let s=a.getBoundingClientRect(),l=e-s.left,r=t-s.top,n=Math.floor((l-o.offsetX)/(10*o.scale)),c=Math.floor((r-o.offsetY)/(10*o.scale));return n>=0&&n<w.boardSize&&c>=0&&c<w.boardSize?{x:n,y:c}:null},[o,w.boardSize]),k=(0,l.useCallback)(()=>{let e=i.current;if(!e)return;let t=e.getContext("2d");if(t){if(t.clearRect(0,0,e.width,e.height),t.save(),t.translate(o.offsetX,o.offsetY),t.scale(o.scale,o.scale),t.fillStyle="#000000",t.fillRect(0,0,e.width,e.height),g){let e=10*w.boardSize;t.drawImage(g,0,0,e,e)}t.restore()}},[o,w,g]),S=(0,l.useCallback)(e=>{},[d,E,r]),C=(0,l.useCallback)(e=>{u(!0),m({x:e.clientX,y:e.clientY})},[]),F=(0,l.useCallback)(e=>{if(!d)return;let t=e.clientX-h.x,a=e.clientY-h.y;c(e=>({...e,offsetX:e.offsetX+t,offsetY:e.offsetY+a})),m({x:e.clientX,y:e.clientY})},[d,h]),_=(0,l.useCallback)(()=>{u(!1)},[]),A=(0,l.useCallback)(e=>{e.preventDefault(),c(t=>{let a=t.offsetX-1.5*e.deltaX,s=t.offsetY-1.5*e.deltaY,l=i.current,r=n.current;if(l&&r){let e=r.getBoundingClientRect(),l=10*w.boardSize*t.scale,i=10*w.boardSize*t.scale,n=e.width+200,o=e.height+200;return{...t,offsetX:Math.max(-l-200,Math.min(n,a)),offsetY:Math.max(-i-200,Math.min(o,s))}}return{...t,offsetX:a,offsetY:s}})},[w.boardSize]),T=e=>{if(e.length<2)return null;let t=e[0].clientX-e[1].clientX,a=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+a*a)},B=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),2===e.touches.length&&p(T(e.touches))},[]),P=(0,l.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),e.nativeEvent.preventDefault(),e.nativeEvent.stopPropagation(),2===e.touches.length){let t=T(e.touches);if(t&&f){let e=t/f;c(t=>{let a=Math.max(.23,Math.min(10,t.scale*e));return{...t,scale:a}}),p(t)}}else if(1===e.touches.length){let t=e.touches[0];c(e=>{let a=e.offsetX+t.clientX-(h.x||t.clientX),s=e.offsetY+t.clientY-(h.y||t.clientY);return{...e,offsetX:a,offsetY:s}}),m({x:t.clientX,y:t.clientY})}},[f,h]),I=(0,l.useCallback)(()=>{p(null),m({x:0,y:0})},[]),L=(0,l.useCallback)(()=>{let e=i.current,t=n.current;if(!e||!t)return;let a=t.getBoundingClientRect();if(e.width=a.width,e.height=a.height,1===o.scale&&0===o.offsetX&&0===o.offsetY){let e=(a.width-10*w.boardSize)/2,t=(a.height-10*w.boardSize)/2;c(a=>({...a,offsetX:e,offsetY:t}))}},[w.boardSize,o]),M=(0,l.useCallback)(()=>{let e=document.createElement("canvas"),t=e.getContext("2d");if(!t)return;let a=new Image;a.onload=()=>{e.width=a.width,e.height=a.height,t.drawImage(a,0,0);let s=document.createElement("a");s.download="pixey-close_".concat(new Date().toISOString().split("T")[0],".png"),s.href=e.toDataURL("image/png"),s.click()},a.src="/pixey-close.png"},[]);return(0,l.useEffect)(()=>{let e=new Image;e.onload=()=>{b(e)},e.src="/pixey-close.png"},[]),(0,l.useEffect)(()=>(L(),window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)),[L]),(0,l.useEffect)(()=>{k()},[k]),(0,l.useEffect)(()=>{let e=()=>u(!1);return document.addEventListener("mouseup",e),()=>document.removeEventListener("mouseup",e)},[]),(0,s.jsxs)("div",{ref:n,className:x("w-full h-full relative overflow-hidden rounded-lg border border-[#262626] pixel-board-container",t),style:{touchAction:"none"},children:[(0,s.jsx)("canvas",{ref:i,className:"absolute inset-0 cursor-crosshair bg-black",onClick:S,onMouseDown:C,onMouseMove:F,onMouseUp:_,onWheel:A,onTouchStart:B,onTouchMove:P,onTouchEnd:I,style:{touchAction:"none",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"}}),(0,s.jsxs)("div",{className:"absolute bottom-40 md:bottom-20 right-4 flex flex-col space-y-2",children:[(0,s.jsx)("button",{onClick:()=>c(e=>({...e,scale:Math.min(10,1.5*e.scale)})),className:"text-white p-3 rounded-full shadow-lg transition-all duration-200 hover:scale-110",style:{background:"linear-gradient(to right, #EE00FF 0%, #EE5705 66%, #EE05E7 100%)",color:"white",padding:"12px",borderRadius:"50%",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",transition:"all 0.2s",border:"none",cursor:"pointer"},title:"Zoom In",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,s.jsx)("button",{onClick:()=>c(e=>({...e,scale:Math.max(.23,e.scale/1.5)})),className:"text-white p-3 rounded-full shadow-lg transition-all duration-200 hover:scale-110",style:{background:"linear-gradient(to right, #EE00FF 0%, #EE5705 66%, #EE05E7 100%)",color:"white",padding:"12px",borderRadius:"50%",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",transition:"all 0.2s",border:"none",cursor:"pointer"},title:"Zoom Out",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 12H6"})})}),(0,s.jsx)("button",{onClick:()=>{let e=i.current,t=n.current;if(!e||!t)return;let a=t.getBoundingClientRect();c({scale:1,offsetX:(a.width-10*w.boardSize)/2,offsetY:(a.height-10*w.boardSize)/2})},className:"text-white p-2 rounded text-xs font-medium shadow-lg transition-all duration-200 hover:scale-110",style:{background:"linear-gradient(to right, #EE00FF 0%, #EE5705 66%, #EE05E7 100%)",color:"white",padding:"8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",transition:"all 0.2s",border:"none",cursor:"pointer"},title:"Reset View",children:"Reset"}),(0,s.jsx)("button",{onClick:()=>M(),className:"text-white p-3 rounded-full shadow-lg transition-all duration-200 hover:scale-110",style:{background:"linear-gradient(to right, #EE00FF 0%, #EE5705 66%, #EE05E7 100%)",color:"white",padding:"12px",borderRadius:"50%",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",transition:"all 0.2s",border:"none",cursor:"pointer"},title:"Download Board",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]}),(0,s.jsx)("div",{className:"absolute top-4 left-4 bg-black/50 backdrop-blur-sm text-white p-3 rounded-lg",children:(0,s.jsxs)("div",{className:"text-xs text-white",children:["Zoom: ",Math.round(100*o.scale),"%"]})})]})}var $=a(12486);function J(e){let{onSubmit:t,isSubmitting:a}=e,[n,o]=(0,l.useState)(""),{connected:c,publicKey:d}=(0,r.v)(),{setVisible:u}=(0,i.o)(),x=async e=>{if(e.preventDefault(),n.trim()&&!a){if(!c||!d)return void u(!0);try{await t(n.trim(),d.toString()),o("")}catch(e){console.error("Error submitting comment:",e)}}};return(0,s.jsx)("div",{className:"mt-4 pt-4 pb-8 border-t border-[#262626]",children:(0,s.jsxs)("form",{onSubmit:x,className:"flex items-center space-x-2",children:[(0,s.jsx)(_,{placeholder:"Send it...",value:n,onChange:e=>o(e.target.value),className:"flex-1 border-[#262626] text-white placeholder:text-gray-400 bg-black focus:outline-none focus-visible:ring-0 focus-visible:ring-offset-0"}),(0,s.jsx)(m,{type:"submit",size:"sm",className:"bg-[#3405EE] hover:bg-[#2804cc] text-white p-2 h-10 w-10",disabled:a||!n.trim(),children:a?(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):(0,s.jsx)($.A,{className:"h-4 w-4"})})]})})}let Z=l.forwardRef((e,t)=>{let{className:a,size:l="md",...r}=e;return(0,s.jsx)("div",{ref:t,className:x("relative flex shrink-0 overflow-hidden rounded-full",{sm:"h-6 w-6",md:"h-8 w-8",lg:"h-10 w-10"}[l],a),...r})});Z.displayName="Avatar";let K=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("img",{ref:t,className:x("aspect-square h-full w-full object-cover",a),...l})});K.displayName="AvatarImage";let Q=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:x("flex h-full w-full items-center justify-center rounded-full bg-muted text-muted-foreground",a),...l})});function ee(e){var t;let a,{comment:l}=e;return(0,s.jsxs)("div",{className:"flex gap-3 p-2 rounded-lg border border-[#262626]",children:[(0,s.jsxs)(Z,{className:"h-8 w-8",children:[(0,s.jsx)(K,{src:(a=l.wallet_address,"https://api.dicebear.com/9.x/pixel-art/svg?seed=".concat(a)),alt:l.wallet_address,className:"h-8 w-8"}),(0,s.jsx)(Q,{className:"text-xs",children:l.wallet_address.substring(0,2).toUpperCase()})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-1 min-w-0",children:[(0,s.jsx)("div",{className:"flex flex-col",children:(0,s.jsx)("span",{className:"font-medium leading-tight text-white",children:(t=l.wallet_address)?t.length<=7?t:"".concat(t.slice(0,4),"...").concat(t.slice(-4)):""})}),(0,s.jsx)("p",{className:"text-sm break-words whitespace-pre-line text-white",children:l.content})]})]})}Q.displayName="AvatarFallback";var et=a(51154),ea=a(81497);function es(e){let{className:t,onVisibilityChange:a}=e,[i,n]=(0,l.useState)([]),[o,c]=(0,l.useState)(!0),[d,u]=(0,l.useState)(!1),[x,h]=(0,l.useState)(!0),{connected:m}=(0,r.v)(),f=(0,l.useRef)(null),p=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e&&c(!0);let t=await fetch("/api/comments");if(t.ok){let e=await t.json();e.success?n(e.data):console.error("Failed to fetch comments:",e.error)}else console.error("Failed to fetch comments")}catch(e){console.error("Error fetching comments:",e)}finally{e&&c(!1)}},g=async(e,t)=>{if(m){u(!0);try{let a=await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json","x-wallet-address":t},body:JSON.stringify({content:e})});if(a.ok){let e=await a.json();e.success?n(t=>[...t,e.data]):console.error("Failed to post comment:",e.error)}else console.error("Failed to post comment")}catch(e){console.error("Error posting comment:",e)}finally{u(!1)}}};return((0,l.useEffect)(()=>{var e;null==(e=f.current)||e.scrollIntoView({behavior:"smooth"})},[i]),(0,l.useEffect)(()=>{p(!0);let e=setInterval(()=>p(!1),5e3);return()=>clearInterval(e)},[]),x)?(0,s.jsxs)("div",{className:"flex flex-col h-full ".concat(t),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b border-[#262626]",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-white",style:{fontFamily:"Matrix Sans, sans-serif"},children:["Chats (",i.length,")"]}),(0,s.jsx)("button",{onClick:()=>{h(!1),null==a||a(!1)},className:"text-gray-400 hover:text-white transition-colors p-1",title:"Close Comments",children:(0,s.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2 p-2",children:o?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(et.A,{className:"h-6 w-6 animate-spin text-purple-400"})}):0===i.length?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,s.jsx)(ea.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{children:"No comments yet"}),(0,s.jsx)("p",{className:"text-sm",children:"Be the first to comment!"})]}):(0,s.jsxs)(s.Fragment,{children:[i.map(e=>(0,s.jsx)(ee,{comment:e},e.id)),(0,s.jsx)("div",{ref:f})]})}),(0,s.jsx)(J,{onSubmit:g,isSubmitting:d})]}):null}var el=a(40646),er=a(85339),ei=a(81284),en=a(1243);let eo=e=>{let{type:t}=e,a={success:el.A,error:er.A,info:ei.A,warning:en.A}[t];return(0,s.jsx)(a,{className:"h-5 w-5"})},ec=e=>{let{toast:t}=e,{removeToast:a}=z(),[r,i]=(0,l.useState)(!1),[n,o]=(0,l.useState)(!1);(0,l.useEffect)(()=>{setTimeout(()=>i(!0),50);let e=setTimeout(()=>{o(!0),setTimeout(()=>a(t.id),300)},t.duration||5e3);return()=>clearTimeout(e)},[t.id,t.duration,a]);let c=x("transition-all duration-300 ease-out",{"translate-x-full opacity-0 scale-95":!r||n,"translate-x-0 opacity-100 scale-100":r&&!n});return(0,s.jsxs)("div",{className:x("relative flex items-center gap-3 p-4 rounded-lg shadow-lg backdrop-blur-sm border-2 transform transition-all duration-300 ease-out max-w-sm",{success:"bg-green-500/20 border-green-400 text-green-100",error:"bg-red-500/20 border-red-400 text-red-100",info:"bg-blue-500/20 border-blue-400 text-blue-100",warning:"bg-yellow-500/20 border-yellow-400 text-yellow-100"}[t.type],c),children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(eo,{type:t.type})}),(0,s.jsx)("div",{className:"flex-1 text-center text-sm font-medium flex items-center justify-center",children:t.message}),(0,s.jsx)("button",{onClick:()=>{o(!0),setTimeout(()=>a(t.id),300)},className:"flex-shrink-0 p-1 rounded-full hover:bg-white/10 transition-colors",children:(0,s.jsx)(p.A,{className:"h-4 w-4"})})]})};function ed(){let{toasts:e}=z();return(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(e=>(0,s.jsx)(ec,{toast:e},e.id))})}var eu=a(42552),ex=a(35695);function eh(){let{publicKey:e,connected:t}=(0,r.v)(),{setVisible:a}=(0,i.o)(),{placePixel:n,addToast:o}=z(),{isAuthenticated:c,isAuthenticating:d}=(()=>{let{publicKey:e,signMessage:t,disconnect:a}=(0,r.v)(),{setUser:s,addToast:i}=z(),[n,o]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!1),[u,x]=(0,l.useState)(!1),[h,m]=(0,l.useState)(!1),f=async()=>{if(e&&t&&!h){d(!0),m(!0);try{let l="I am logging in to pixey.vibegame.fun",r=new TextEncoder().encode(l),n=await t(r),c=eu.A.encode(n),d=await fetch("/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet_address:e.toString(),message:l,signature:c})}),u=await d.json();if(u.success){s(u.data.user),o(!0);let t={user:u.data.user,token:u.data.token,timestamp:Date.now()};localStorage.setItem("pixey_auth_".concat(e.toString()),JSON.stringify(t)),u.data.isNewUser?i({message:"Welcome to Pixey! You have ".concat(u.data.user.free_pixels," free pixels to start."),type:"success"}):i({message:"Welcome back! You have ".concat(u.data.user.free_pixels," pixels available."),type:"info"})}else i({message:u.error||"Authentication failed",type:"error"}),a()}catch(e){i({message:"Failed to authenticate wallet",type:"error"}),a()}finally{d(!1),m(!1)}}};return(0,l.useEffect)(()=>{e&&(x(!1),o(!1),localStorage.removeItem("pixey_auth_".concat(e.toString())))},[e]),(0,l.useEffect)(()=>{if(!e){o(!1),x(!1),m(!1);return}!u&&(h||(x(!0),f()))},[e,s,f,u,h]),{isAuthenticated:n,isAuthenticating:c,authenticateWallet:f,triggerAuth:()=>x(!1)}})(),[u,x]=(0,l.useState)(!1),[h,f]=(0,l.useState)(F.cF[0]),[p,b]=(0,l.useState)(null),[w,S]=(0,l.useState)(!1),[C,_]=(0,l.useState)([]),[A,T]=(0,l.useState)([]),[B,P]=(0,l.useState)(1),[I,L]=(0,l.useState)(!1),[M,R]=(0,l.useState)(!1),[Y,O]=(0,l.useState)(!1),[X,W]=(0,l.useState)(!1);(()=>{let{data:e}=(0,k.useSession)(),{publicKey:t}=(0,r.v)(),a=(0,ex.useRouter)();(0,l.useEffect)(()=>{var l;console.log("useXConnection hook - Session:",e),console.log("useXConnection hook - PublicKey:",null==t?void 0:t.toString()),(null==e||null==(l=e.user)?void 0:l.username)&&t&&(console.log("Found X session and wallet, checking URL params..."),new URLSearchParams(window.location.search).get("wallet")===t.toString()&&(console.log("Wallet param matches, updating profile..."),s(),a.replace(window.location.pathname)))},[e,t,a]);let s=async()=>{var s;if((null==e||null==(s=e.user)?void 0:s.username)&&t)try{(await fetch("/api/update-profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet_address:t.toString(),username:e.user.username,profile_picture:e.user.profilePicture,isXConnection:!0})})).ok&&(console.log("Profile updated successfully"),a.replace(window.location.pathname))}catch(e){console.error("Error updating profile:",e)}}})();let q=async()=>{try{let e=await fetch("/api/users");if(e.ok){let t=await e.json();if(t.success&&t.data){let e=t.data.filter(e=>e.total_pixels_placed>0).sort((e,t)=>t.total_pixels_placed-e.total_pixels_placed);T(e),_(e.slice(0,10)),P(1)}}}catch(e){console.error("Error fetching top players:",e)}};(0,l.useEffect)(()=>{let e=e=>{"c"!==e.key.toLowerCase()||e.ctrlKey||e.metaKey||x(e=>!e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]);let $=async()=>{o({message:"The board is frozen. Pixel placement is currently disabled.",type:"warning"})};return(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)(ed,{}),(0,s.jsx)(H,{isAuthenticated:c,onMobileMenuChange:O}),(0,s.jsx)("div",{className:"mx-4 mt-1 mb-1",children:(0,s.jsx)("div",{className:"w-full text-center text-white font-semibold bg-EE5705/10 rounded-lg p-2 border border-white/20 text-xs sm:text-lg",children:"Pixey S1 is over. Over 33k Pixey were placed in 5 days on Solana. We’ll be back soon!"})}),(0,s.jsxs)("div",{className:"flex h-[calc(100vh-120px)] ".concat(u?"":"justify-center"),children:[(0,s.jsx)("div",{className:"p-2 ".concat(u?"flex-1":"w-full"),children:(0,s.jsx)(G,{className:"w-full h-full",selectedPixel:p,onPixelSelect:e=>{if(b(e),e){let t=new CustomEvent("pixelSelected",{detail:e});document.dispatchEvent(t)}}})}),u&&(0,s.jsx)("div",{className:"w-80 p-2 border-l border-[#262626] relative z-40 bg-black/30 backdrop-blur-xl",children:(0,s.jsx)(es,{className:"h-full",onVisibilityChange:x})})]}),(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-transparent backdrop-blur-md border-t border-[#262626] p-4 z-30",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-8",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-2 md:flex-row md:space-y-0 md:space-x-2",children:[(0,s.jsx)("div",{className:"flex gap-1 md:gap-2",children:F.cF.slice(0,Math.ceil(F.cF.length/2)).map(e=>(0,s.jsx)("button",{onClick:()=>f(e),className:"w-9 h-9 md:w-10 md:h-10 rounded-lg border-2 transition-all duration-200 hover:scale-110 ".concat(h===e?"border-white shadow-lg":"border-[#262626]"),style:{backgroundColor:e},title:"Select ".concat(e)},e))}),(0,s.jsxs)("div",{className:"flex gap-1 md:gap-2",children:[F.cF.slice(Math.ceil(F.cF.length/2)).map(e=>(0,s.jsx)("button",{onClick:()=>f(e),className:"w-9 h-9 md:w-10 md:h-10 rounded-lg border-2 transition-all duration-200 hover:scale-110 ".concat(h===e?"border-white shadow-lg":"border-[#262626]"),style:{backgroundColor:e},title:"Select ".concat(e)},e)),(0,s.jsx)("input",{type:"color",value:h,onChange:e=>f(e.target.value),className:"w-9 h-9 md:w-10 md:h-10 rounded-lg border-2 border-[#262626] cursor-pointer transition-all duration-200 hover:scale-110",title:"Pick custom color"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[e&&c&&(0,s.jsxs)(m,{onClick:()=>R(!0),className:"md:hidden border border-yellow-500/30 text-white hover:bg-yellow-500/30 px-6 py-2 h-auto flex items-center",style:{backgroundColor:"#FFAE0033"},children:[(0,s.jsx)(D.A,{className:"h-3 w-3 mr-1 text-white"}),"Buy Pixels"]}),(0,s.jsx)("button",{onClick:$,disabled:!0,className:"text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",style:{background:"linear-gradient(to right, #666 0%, #666 66%, #666 100%)",color:"white",padding:"8px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",transition:"all 0.2s",border:"none",cursor:"not-allowed"},children:"Board Frozen"})]})]})}),!u&&!Y&&(0,s.jsx)("button",{onClick:()=>x(!0),className:"fixed top-36 right-4 z-50 text-white p-3 rounded-full shadow-lg transition-all duration-200 hover:scale-110",style:{background:"linear-gradient(to right, #EE00FF 0%, #EE5705 66%, #EE05E7 100%)",color:"white",padding:"12px",borderRadius:"50%",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",transition:"all 0.2s",border:"none",cursor:"pointer"},title:"Open Comments",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M12 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),!u&&!Y&&(0,s.jsx)("button",{onClick:()=>{S(!0),q()},className:"fixed top-52 right-4 z-50 text-white p-3 rounded-full shadow-lg transition-all duration-200 hover:scale-110",style:{background:"linear-gradient(to right, #EE00FF 0%, #EE5705 66%, #EE05E7 100%)",color:"white",padding:"12px",borderRadius:"50%",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",transition:"all 0.2s",border:"none",cursor:"pointer"},title:"Open Leaderboard",children:(0,s.jsx)(U.A,{className:"h-6 w-6"})}),(0,s.jsx)(V,{isOpen:M,onClose:()=>R(!1)}),(0,s.jsx)(g,{open:w,onOpenChange:S,children:(0,s.jsxs)(v,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,s.jsx)(y,{children:(0,s.jsxs)(j,{className:"flex items-center gap-2",children:[(0,s.jsx)(U.A,{className:"h-6 w-6 text-yellow-500"}),"Leaderboard"]})}),(0,s.jsx)("div",{className:"space-y-4",children:C.length>0?(0,s.jsxs)(s.Fragment,{children:[C.map((e,t)=>(0,s.jsx)(N,{className:"bg-white/5 border-white/10",children:(0,s.jsx)(E,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full text-black font-bold text-sm",children:t+1}),(0,s.jsx)("img",{src:e.profile_picture||"https://api.dicebear.com/9.x/pixel-art/svg?seed=".concat(e.wallet_address),alt:"Avatar",className:"h-8 w-8 rounded-full"}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"font-medium text-white",children:e.username===e.wallet_address?e.username.slice(0,4)+"..."+e.username.slice(-4):e.username})})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Placed pixels"}),(0,s.jsx)("div",{className:"font-medium text-white",children:e.total_pixels_placed})]})]})})},e.wallet_address)),C.length<A.length&&(0,s.jsx)("div",{className:"text-center py-4",children:(0,s.jsx)("button",{onClick:()=>{if(I)return;L(!0);let e=B+1,t=(e-1)*10,a=A.slice(t,t+10);a.length>0&&(_(e=>[...e,...a]),P(e)),L(!1)},disabled:I,className:"text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",style:{background:"linear-gradient(to right, #EE00FF 0%, #EE5705 66%, #EE05E7 100%)",color:"white",padding:"8px 24px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",transition:"all 0.2s",border:"none",cursor:"pointer"},children:I?"Loading...":"Show All"})})]}):(0,s.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No players found"})})]})})]})}function em(){return(0,s.jsx)(n.default,{children:(0,s.jsx)(eh,{})})}},47790:()=>{},57141:(e,t,a)=>{"use strict";a.d(t,{AU:()=>r,P$:()=>n,RZ:()=>s,TG:()=>o,cF:()=>u,ft:()=>c,qe:()=>l,w8:()=>d,xZ:()=>i});let s="https://flying-torrie-fast-mainnet.helius-rpc.com",l="3nf8LgahHm57gEUx64cDNJf4h53C2MwqZCK6LGDTsend",r="https://lite-api.jup.ag/ultra/v1",i={SOL:"So11111111111111111111111111111111111111112"},n=10,o=1,c=async()=>{try{let{Connection:e,PublicKey:t}=a(23570),r=new e(s,"confirmed"),i=new t(l),n=(await r.getTokenSupply(i)).value.uiAmount||0;return 1e9-n}catch(e){return console.error("Error fetching VIBEY token supply:",e),0}},d={STAGE_1:{size:200,required_burns:0},STAGE_2:{size:500,required_burns:2e4},STAGE_3:{size:1e3,required_burns:1e5}},u=["#FF0000","#FFA500","#FFFF00","#00FF00","#00FA9A","#00FFFF","#87CEEB","#0000FF","#8A2BE2","#FF00FF","#FF69B4","#800080","#008000","#A52A2A","#C0C0C0","#FFFFFF","#000000"]},59976:(e,t,a)=>{"use strict";a.d(t,{default:()=>f});var s=a(95155),l=a(12115),r=a(4119),i=a(15572),n=a(59021),o=a(96329),c=a(48087),d=a(46994),u=a(94375),x=a(69364),h=a(23570),m=a(57141);function f(e){let{children:t}=e,a=n.B.Devnet,f=(0,l.useMemo)(()=>m.RZ||(0,h.clusterApiUrl)(a),[a]),p=(0,l.useMemo)(()=>[new c.c,new d.d,new u.G,new x.G],[]);return(0,s.jsx)(r.S,{endpoint:f,children:(0,s.jsx)(i.r,{wallets:p,autoConnect:!0,children:(0,s.jsx)(o.I,{children:t})})})}a(23669)}},e=>{e.O(0,[252,956,905,130,894,441,964,358],()=>e(e.s=7676)),_N_E=e.O()}]);